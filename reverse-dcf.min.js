window.launchReverseDCF=function(){if("www.screener.in"!==window.location.hostname)return void alert("This feature only works with https://www.screener.in/");if(document.getElementById("myBookmarkletPopup"))return;const e=document.createElement("div");e.id="myBookmarkletPopup",e.style="\n    position:fixed;\n    top:20px;\n    right:20px;\n    z-index:99999;\n    background:#fff;\n    border:1px solid #ccc;\n    padding:10px;\n    border-radius:8px;\n    box-shadow:0 2px 10px rgba(0,0,0,0.2)\n  ";let t="",n="",o=18,r=15,l=20;function c(e){if("P/E"===e)n=Array.from(document.querySelectorAll("#profit-loss table.data-table tbody tr")).find((e=>e.cells[0].innerText.includes("Net Profit")))?.querySelectorAll("td:last-child")[0]?.innerText?.replaceAll(",",""),t=document.querySelector("#top-ratios li")?.getElementsByClassName("value")[0]?.getElementsByClassName("number")[0]?.innerText?.replaceAll(",","");else if("P/BV"===e)t=document.querySelectorAll("#top-ratios li")[1]?.getElementsByClassName("value")[0]?.getElementsByClassName("number")[0]?.innerText?.replaceAll(",",""),n=document.querySelectorAll("#top-ratios li")[4]?.getElementsByClassName("value")[0]?.getElementsByClassName("number")[0]?.innerText?.replaceAll(",",""),o=4,r=4,l=5;else if("EV/EBITDA"===e){const e=document.querySelectorAll("#top-ratios li");let c=!1;for(let n=0;n<=e.length;++n){const e=document.querySelectorAll("#top-ratios li")[n];if("Enterprise Value"===e?.getElementsByClassName("name")?.[0]?.innerText){t=e?.getElementsByClassName("value")?.[0]?.innerText?.match(/[\d,]+/)[0].replace(/,/g,""),c=!0;break}}if(!c||null==t)return void alert('Please add "Enterprise value" quick ratio');n=Array.from(document.querySelectorAll("#profit-loss table.data-table tbody tr")).find((e=>e.cells[0].innerText.includes("Operating Profit")))?.querySelectorAll("td:last-child")[0]?.innerText?.replaceAll(",",""),o=15,r=15,l=18}s(),function(){const e=`mc=${t}&e=${n}&dr=25&m1=${o}&m2=${r}&m3=${l}&d3=3`,c="calc_encryption_key_13624";if(e&&c&&window.CryptoJS){const t=CryptoJS.RC4.encrypt(e,c).toString(),n=`https://calc-fin.netlify.app/#/calculator/reverse-dcf?calcId=${encodeURIComponent(t)}`;window.open(n)}else console.error("Text and key are required, or CryptoJS not loaded!")}()}["P/E","P/BV","EV/EBITDA"].forEach((t=>{const n=document.createElement("button");n.textContent=t,n.style="margin:5px;padding:6px 10px;cursor:pointer;",n.onclick=()=>c(t),e.appendChild(n)}));const i=document.createElement("button");function a(t){e.contains(t.target)||s()}function s(){document.removeEventListener("click",a,!0),e.remove()}if(i.textContent="Ã—",i.style="\n    top:2px;\n    right:5px;\n    background:none;\n    border:none;\n    font-size:16px;\n    cursor:pointer;\n    color:#888;\n  ",i.onclick=()=>s(),e.appendChild(i),document.body.appendChild(e),setTimeout((()=>{document.addEventListener("click",a,!0)}),0),"undefined"==typeof CryptoJS){const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js",document.head.appendChild(e)}};
